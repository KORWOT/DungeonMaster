# 던전 시스템 핵심 요구사항 및 UX 흐름

**1. 던전의 목적 및 역할**
*   **핵심 기능:** 플레이어가 '인스턴트 게임' 모드에서 적의 공격을 막아내는 주 방어 공간입니다.
*   **전투 트리거:** 게임 내 다양한 이벤트 발생 시, 플레이어가 미리 설정해 둔 커스텀 던전이 로드되어 전투가 시작됩니다.

**2. 던전 커스터마이징 (전투 시작 전)**
*   **기본 구조:** 3x3 크기의 그리드에서 시작하며, 추후 이벤트를 통해 크기 확장이 가능해야 합니다.
*   **방 배치:** 플레이어는 정해진 그리드 내에 다양한 종류의 '방(Room)'을 배치할 수 있습니다.
*   **길 연결:**
    *   방과 방 사이의 길을 자유롭게 만들거나 지울 수 있습니다.
    *   **필수 규칙:** '입구(Start)'와 '마왕방(Boss Room)'은 반드시 하나 이상의 길로 연결되어야 합니다. 이 규칙이 충족되지 않으면 던전 디자인을 최종 저장할 수 없습니다.
*   **몬스터 배치:** '전투(Combat)' 유형의 방에는 플레이어가 소유한 몬스터 카드를 배치할 수 있습니다.
*   **유물 시스템 (확장 기능):**
    *   현재는 구현하지 않지만, 추후 확장 가능성을 열어둡니다.
    *   던전 전체에 적용되는 버프와 같은 효과를 부여하는 기능입니다.

**3. 던전 고정 요소**
*   **마왕방:** 위치와 그 안에 배치되는 '마왕'은 플레이어가 변경할 수 없는 고정 요소입니다. (추후 마왕을 교체하는 시스템은 고려될 수 있습니다.)

**4. 핵심 로직**
*   **경로 유효성 검사:** 던전 저장 시, '입구'에서 '마왕방'까지 길이 연결되어 있는지 확인하는 알고리즘(예: BFS, DFS)이 반드시 필요합니다. 